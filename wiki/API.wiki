#summary Internals overview and API

= Introduction =

The POISE pipeline consists of generators. Normally one or more generators will be embedded in other generators. To get sound information, a generator is called, and a buffer is asked for. The buffer with the rendered data is returned. For instance

{{{
Python 2.5.2 Stackless 3.1b3 060516 (python-2.52:61022, Feb 27 2008, 16:52:03) 
[GCC 4.0.1 (Apple Computer, Inc. build 5341)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import poise
>>> gen = poise.osc.sine(freq=881, gain=-3)
>>> gen
<generator object at 0x1d493a0>
}}}

If we call next(), we get it's allocated empty buffer

{{{
>>> gen.next()
array([ 0.,  0.,  0., ...,  0.,  0.,  0.])
}}}

This buffer is used over and over again on subsequent calls, and will be modified inplace. Using send(), we send the generator a tuple of (offset, size), and it will render into the buffer that part of the wave, and return the same buffer again. The buffer will probably be longer than the rendered data.

{{{
>>> gen.send( (0,100) )
array([ 0.        ,  0.08126858,  0.16146266, ...,  0.        ,
        0.        ,  0.        ])
>>> len(gen.send( (0,100) ))
262144
>>> gen.send( (0,100) )[:100]
array([ 0.        ,  0.08126858,  0.16146266,  0.24003285,  0.31490079,
        0.38560531,  0.4516297 ,  0.51122761,  0.56406623,  0.60972321,
        0.64699072,  0.67570394,  0.69558454,  0.7061066 ,  0.70726931,
        0.6990419 ,  0.68157208,  0.6548847 ,  0.61968577,  0.57629353,
        0.52491766,  0.46691716,  0.40274316,  0.33276525,  0.25883418,
        0.18148091,  0.10119096,  0.02008784, -0.06182181, -0.14237113,
       -0.22103825, -0.29727563, -0.36906689, -0.43597856, -0.49751219,
       -0.55204034, -0.59926963, -0.63880986, -0.66961509, -0.691567  ,
       -0.70442957, -0.7078625 , -0.70186555, -0.68659735, -0.66225135,
       -0.62890011, -0.58742601, -0.53818506, -0.4814305 , -0.41866377,
       -0.35036165, -0.27692741, -0.20030385, -0.12103163, -0.03961754,
        0.04178575,  0.12317114,  0.20238599,  0.278925  ,  0.35224727,
        0.42041332,  0.48302078,  0.53959364,  0.58863539,  0.62989444,
        0.66301584,  0.68712354,  0.70214629,  0.70789248,  0.70421004,
        0.69109929,  0.66890699,  0.63787073,  0.5981105 ,  0.55067801,
        0.49596471,  0.43426532,  0.36721176,  0.29530308,  0.21897389,
        0.14024293,  0.05965774, -0.02225878, -0.1033401 , -0.18357955,
       -0.26085451, -0.33468071, -0.40452749, -0.46854752, -0.52637261,
       -0.57755244, -0.62073302, -0.65570658, -0.68215615, -0.69938201,
       -0.70736092, -0.7059468 , -0.69517714, -0.6750527 , -0.646106  ])

}}}